{- GLOBAL OP-CODES -}

;; Common
const int op::GET_STATIC_DATA        = 0x2fcb26a2;
const int op::REPORT_STATIC_DATA     = 0x8b771735;
const int op::GET_STORAGE_DATA       = 0x5b88e5cc;
const int op::REPORT_STORAGE_DATA    = 0xaab4a8ef;
const int op::EXCESSES               = 0xd53276db;
const int op::FILL_UP_BALANCE        = 0x0609e47b;
const int op::DEDUST_PAYOUT          = 0x474f86cf;

;; Jettons
const int op::TRANSFER_JETTON        = 0x0f8a7ea5;
const int op::TRANSFER_NOTIFICATION  = 0x7362d09c;
const int op::PROVIDE_WALLET_ADDRESS = 0x2c76b973;
const int op::TAKE_WALLET_ADDRESS    = 0xd1735400;
const int op::BURN_JETTON            = 0x595f07bc;

;; NFTs
const int op::TRANSFER_NFT           = 0x5fcc3d14;
const int op::OWNERSHIP_ASSIGNED     = 0x05138d91;

;; Domains
const int op::OUTBID_NOTIFICATION    = 0x557cea20;
const int op::CHANGE_DNS_RECORD      = 0x4eb1f0f9;
const int op::DNS_BALANCE_RELEASE    = 0x4ed14b65;

;; DEDUST
const int op::SWAP_JETTON              = 0xe3a0d482;
const int op::DEPOSIT_LIQUIDITY_JETTON = 0x40e108d6;
const int op::SWAP_TON                 = 0xea06185d;
const int op::DEPOSIT_LIQUIDITY_TON    = 0xd55e4686;


{- LOCAL OP-CODES -}

;; Common
const int op::SET_NEW_DATA            = 0xb1f57834;
const int op::CANCEL_DEAL             = 0x8ea53895;
const int op::CHANGE_PRICE            = 0x96189f94;
const int op::CHANGE_VALID_UNTIL      = 0xfd265ff8;
const int op::RENEW_DOMAIN            = 0x2e9ead29;
const int op::RENEWAL_FEE             = 0x975f5690;
const int op::MAKE_HOT                = 0x504b6dd7;
const int op::MAKE_COLORED            = 0x96dc2804;

;; Admin
const int op::SEND_ANY_MESSAGE       = 0xa47d989c;
const int op::SET_CODE               = 0xe2d2d211;
const int op::WITHDRAW_TON           = 0x37726bdb;
const int op::WITHDRAW_JETTON        = 0x11c09682;
const int op::WITHDRAW_DOMAIN        = 0x00dc315b;

{- MESSAGE MODES -}

const int mode::SIMPLE                  = 0;
const int mode::CARRY_REMAINING_GAS     = 64;
const int mode::CARRY_REMAINING_BALANCE = 128;

const int mode::PAY_FEES_SEPARATELY     = 1;
const int mode::IGNORE_ERRORS           = 2;
const int mode::BOUNCE_ON_FAIL          = 16;
const int mode::SELFDESTRUCT_ON_EMPTY   = 32;


{- TON VALUES -}

const int tons::MIN_RESERVE           = 15000000;   ;; 0.015 TON 
const int tons::MIN_EXCESS            = 10000000;   ;; 0.01  TON 
const int tons::NFT_TRANSFER          = 25000000;   ;; 0.025 TON
const int tons::JETTON_TRANSFER       = 50000000;   ;; 0.05 TON 
const int tons::BURN_JETTON           = 50000000;   ;; 0.05  TON
const int tons::RENEW_DOMAIN          = 10000000;   ;; 0.01  TON
const int tons::RENEW_REQUEST         = 100000000;  ;; 0.1   TON
const int tons::PURCHASE_NOTIFICATION = 30000000;   ;; 0.03  TON
const int tons::OFFER_NOTIFICATION    = 100000000;  ;; 0.1   TON
const int tons::DECLINE_REWARD        = 10000000;   ;; 0.01  TON
const int tons::NOTIFY_MARKETPLACE    = 10000000;   ;; 0.01  TON
const int tons::GET_JETTON_WALLET     = 20000000;   ;; 0.02   TON

{- EXCEPTIONS -}

const int exc::OUT_OF_GAS            = 13;

const int exc::INVALID_SIGNATURE     = 35;

const int exc::DEAL_NOT_ACTIVE       = 44;
const int exc::DOMAIN_EXPIRED        = 45;
const int exc::ALREADY_DEPLOYED      = 46;
const int exc::INCORRECT_DOMAIN      = 47;
const int exc::CANT_CANCEL_DEAL      = 48;
const int exc::INCORRECT_VALID_UNTIL = 49;
const int exc::INCORRECT_SENDER      = 50;
const int exc::DOMAIN_NOT_EXISTS     = 51;
const int exc::NOT_ENOUGH_JETTONS    = 52;

const int exc::WRONG_CHAIN           = 333;
const int exc::UNSUPPORTED_OP        = 0xffff;


{- ADDRESSES -}

const slice MARKETPLACE_ADDRESS = "MARKETPLACE_ADDRESS"a;  ;; EQAX21A4fIw7hX1jmRjvJT0DX7H_FUItj2duCBWtK4ayEiC_
;; const slice ADMIN_ADDRESS       = "0QCovSj8c8Ik1I-RZt7dbIOEulYe-MfJ2SN5eMhxwfACviV7"a;   ;; onchain
const slice ADMIN_ADDRESS       = "ADMIN_ADDRESS"a; 
const slice WEB3_ADDRESS        = "WEB3_ADDRESS"a;
const slice USDT_ADDRESS        = "USDT_ADDRESS"a;
const slice BURN_ADDRESS        = "EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c"a;
;; const slice TON_DNS_ADDRESS     = "kQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz_v5"a;  ;; onchain
const slice TON_DNS_ADDRESS      = "TON_DNS_ADDRESS"a;  
const slice TG_USERNAMES_ADDRESS = "USERNAMES_COLLECTION_ADDRESS"a;

const slice TON_VAULT_ADDRESS   = "TON_VAULT_ADDRESS"a;
const slice USDT_VAULT_ADDRESS  = "USDT_VAULT_ADDRESS"a;
const slice WEB3_VAULT_ADDRESS  = "WEB3_VAULT_ADDRESS"a;


{- STRING COMMANDS -}

const slice msg::CANCEL_MESSAGE = "cancel";
const slice msg::RENEW_DOMAIN_MESSAGE = "renew";
const slice msg::FILL_UP_BALANCE_MESSAGE = "fillup";
const slice msg::MARKETPLACE_COMMISSION_MESSAGE = "Marketplace commission";

{- NOTIFICATIONS -}

cell BUYER_NOTIFICATION() asm "B{b5ee9c7241010101001f00003a000000005075726368617365206f6e20776562646f6d2e6d61726b65740f51799a} B>boc PUSHREF";  ;; Purchase on webdom.market
cell EXCESSES_NOTIFICATION() asm "B{b5ee9c7201010101000e000018000000004578636573736573} B>boc PUSHREF";  ;; Excesses
cell MARKETPLACE_COMMISSION_NOTIFICATION() asm "B{b5ee9c7241010101001c000034000000004d61726b6574706c61636520636f6d6d697373696f6e30480693} B>boc PUSHREF";  ;; Marketplace commission

{- OTHER -}

slice BIT_FALSE_SLICE() asm "b{0} PUSHSLICE";
slice BIT_TRUE_SLICE() asm "b{1} PUSHSLICE";
slice TWO_ZEROS_SLICE() asm "b{00} PUSHSLICE";

const int WORKCHAIN = 0;
const int ONE_TON = 1000000000;
const int MAX_COINS_VALUE = 0xffffffffffffffffffffffffffffff;
const int ONE_HOUR = 60 * 60;
const int ONE_DAY = 24 * ONE_HOUR;
const int ONE_YEAR = 366 * ONE_DAY;  ;; taken from TON DNS constants

const int COMMISSION_DIVIDER = 10000;

;; onchain
;; cell DOMAIN_CODE() asm "B{b5ee9c7201022a010006a5000114ff00f4a413f4bcf2c80b0102016202030202cc0405020120202102012006070201481a1b020120080902015818190201200a0b000d470c8cb01c9d0801f73e09dbc400b434c0c05c6c2497c1383e903e900c7e800c5c75c87e800c7e800c3c0289ece39497c15b088d148cb1c17cb865407e90350c1b5c3232c1fd00327e08e08418b93cc428608209e3402a4108308324cc200337a082024ea02082024b1c162a20032a41287e08c0683c00911dfc02440d7e08fc02f814d6600c00113e910c1c2ebcb8536004fac70518b08e34109b5f0bfa40307020f8256d8040708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb00e029c70091709509d31f50aae221f008f82321bc24c0008e9e343a3a3b8e1636363737375135c705f2e196102510241023f823f00be30ee0310dd33f256eb31fb0e30f0d0e0f1001fc302680698064a98452b0bef2e19782103b9aca0052a0a15270bc993682103b9aca0019a193390805e220c2008e328210557cea20f82510396d71708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb00923036e2810e1023f823a1a120c2009313a0029130e24474f0091024f8231100d2343653cda182103b9aca005210a15270bc993682103b9aca0016a1923005e220c2008e378210370fec516d72295134544743708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb001ca10b9130e26d5477655477632ef00b0200046c2104c882105fcc3d145220ba8e9531373b5372c705f2e191109a104910384706401504e082101a0b9d515220ba8e195b32353537375135c705f2e19a03d4304015045033f823f00be02182104eb1f0f9bae3023b20821044beae41bae302382782104ed14b65ba151213140004f00b00885b363638385147c705f2e19b04d3ff20d74ac20007d0d30701c000f2e19cf404300798d43040168307f417983050058307f45b30e270c8cb07f400c910354014f823f00b01fe30363a246ef2e19d8050f833d0f4043052408307f40e6fa1f2e19fd30721c00022c001b1f2e1a021c0008e9124109b1068517a10571046105c43144cdd9630103a395f07e201c0018e32708210370fec51586d8100a0708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb00915be21501a2e3025f0432353582102fcb26a2ba8e3a7082108b77173504c8cbff5005cf161443308040708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb00e05f04840ff2f01701f03502fa4021f001fa40d20031fa0082103b9aca001da121945314a0a1de22d70b01c300209205a19135e220c2fff2e192218e3e821005138d91c8500bcf16500dcf1671244b145448c0708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb00106994102c395be20116008a8e3528f0018210d53276db103946096d71708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb0093383430e21045103412f823f00b00fc37f8235006a18209e28500bc066e16b0f2e19e23d0d749f823f0075290bef2e1975178a182103b9aca00a120c2008e32102782104ed14b6558076d72708010c8cb055007cf165005fa0215cb6a12cb1fcb3f226eb39458cf17019132e201c901fb0093303535e2f8238208093a80a0f0024477f0091045103412f823f00b0093083001258c2040fa201938083001658c20407d200cb8083001a58c204064200a38083001e58c20404b2007b8083002258c204032200538083002650c20191eb83002a4e00c9d781e9c600069006ac0bc018060840ee6b2802a0060840ee6b2802a00a08418b93cc428608209e3402a410830856456f81b04a5a9d6a0192a4139200201201c1d0201201e1f0021081ba50c1b5c0838343e903e8034cfcc200017321400f3c5807e80b2cff26000513b513434fffe900835d2708027dfc07e9035353d0134cfcc0415c415b80c1c1b5b5b5b490415c415a0002b01b232ffd40173c59400f3c5b3333d0032cff27b5520020120222302012026270013bbb39f00a175f07f008802027424250010a874f00a10475f07000ca959f00a6c71000db8fcff00a5f03802012028290013b64a5e014204ebe0fa1000c7b461843ae9240f152118001e5c08de014206ebe0fa1a60e038001e5c339e8086007ae140f8001e5c33b84111c466105e033e04883dcb11fb64ddc4964ad1ba06b879240dc23572f37cc5caaab143a2fffbc4180012660f003c003060fe81edf4260f0030} B>boc PUSHREF";
;; tests
cell DOMAIN_CODE() asm "B{DOMAIN_CODE} B>boc PUSHREF";
cell TG_USERNAME_CODE() asm "B{TG_USERNAME_CODE} B>boc PUSHREF";

cell WEB3_WALLET_CODE() asm "B{WEB3_WALLET_CODE} B>boc PUSHREF";
cell USDT_WALLET_CODE() asm "B{USDT_WALLET_CODE} B>boc PUSHREF";
