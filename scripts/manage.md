\* This file was auto-generated by chat gpt, sorry \*

### Manage script (TypeScript)

This script mirrors the behavior of `manage.py` and provides a single entry point to build, run, test, and generate deploy function code while temporarily updating `contracts/imports/constants.tolk` with environment-specific values.

#### Location
- `scripts/manage.ts`

#### Prerequisites
- Node.js and npm
- Project dependencies installed (`npm i`)
- Optional: `.env` file with the following variables when using on-chain modes:
  - `MARKETPLACE_ADDRESS`
  - `ADMIN_ADDRESS`
  - `MARKETPLACE_ADDRESS_TESTNET`
  - `ADMIN_ADDRESS_TESTNET`

#### Usage

Run with ts-node:

```bash
npx ts-node scripts/manage.ts <build|test|run|get_deploy_functions> <target|--all> [options]
```

Examples:
- Build a single contract (mainnet addresses):
  ```bash
  npx ts-node scripts/manage.ts build TonSimpleSale
  ```

- Build all contracts (mainnet addresses):
  ```bash
  npx ts-node scripts/manage.ts build --all
  ```

- Build on testnet (replaces constants with testnet values, flag not forwarded to blueprint build):
  ```bash
  npx ts-node scripts/manage.ts build --all --testnet
  ```

- Run a contract with testnet constants:
  ```bash
  npx ts-node scripts/manage.ts run TonSimpleSale --testnet
  ```

- Test a single contract with local/testing constants:
  ```bash
  npx ts-node scripts/manage.ts test TonSimpleSale
  ```

- Test all contracts and include gas report:
  ```bash
  npx ts-node scripts/manage.ts test --all --gas-report
  ```

- Generate deploy function code (mainnet constants):
  ```bash
  npx ts-node scripts/manage.ts get_deploy_functions TonSimpleSale
  ```

- Generate deploy function code in testing mode (overrides `MARKETPLACE_ADDRESS` with WEB3 value used in tests):
  ```bash
  npx ts-node scripts/manage.ts get_deploy_functions TonSimpleSale --test
  ```

#### Behavior details
- The script temporarily replaces placeholders in `contracts/imports/constants.tolk`, runs the requested command, and then restores the original file content.
- For `build` and `run`, addresses are taken from on-chain sets (mainnet or testnet).
- For `test`, testing constants are used, and when the contract is `Marketplace`, the `MARKETPLACE_ADDRESS` is overridden with the WEB3-specific value to match the Python script.
- For `get_deploy_functions`, by default mainnet constants are used. If `--test` is passed, testing constants are used with the WEB3 override.
- `--testnet` is not forwarded to the underlying `blueprint build` (matches Python behavior), but it selects the testnet constants for replacement.
- `--gas-report` adds the flag to the underlying blueprint command when present.

#### NPM script (optional)
To add a convenience npm script:
```json
{
  "scripts": {
    "manage": "ts-node scripts/manage.ts"
  }
}
```
Then you can run:
```bash
npm run manage -- build --all
```


